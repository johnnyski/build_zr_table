<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.5 [en] (X11; U; Linux 2.0.32 i686) [Netscape]">
</head>
<body text="#000000" bgcolor="#C0C0C0" link="#0000EE" vlink="#551A8B" alink="#FF0000">
&nbsp;
<center><table BORDER=5 CELLSPACING=5 CELLPADDING=5 WIDTH="100%" >
<tr>
<td><img SRC="zr_logo.gif" height=100 width=256></td>

<td><b><font color="#000080"><font size=+2>automatic_zr.pl:&nbsp;</font></font></b>
<br><b><font color="#800080"><font size=+1>Generate a ZR table from the
merged radar and gauge file, optionally perform QC.</font></font></b></td>
</tr>
</table></center>
<b>Updated</b>: April 29, 1999.
<p>
<hr WIDTH="100%">
<h3>
<font color="#000080">Synopsis</font></h3>

<pre><b><font color="#B22222">&nbsp;&nbsp;&nbsp; automatic_zr.pl [--no-qc]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [--filter-file file]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [--gauges-removed]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [--help]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [2-nd_intermediate.ascii]</font></b>





<hr WIDTH="100%"></pre>

<h3>
<b><font color="#000080">Description</font></b></h3>
<font color="#000000">Process the merged radar and gauge dataset, aka the
2-nd or 3-rd intermediate file, through to the ZR table.</font>
<p><font color="#000000">Features:</font>
<br>&nbsp;
<table BORDER COLS=2 WIDTH="100%" NOSAVE >
<tr NOSAVE>
<td NOSAVE><font color="#000000">Automatic gauge quality control. (optional)</font></td>

<td><a href="automatic_qc.html">automatic_qc.pl</a></td>
</tr>

<tr>
<td><font color="#000000">Gauge filtering. (optional)</font></td>

<td><a href="gauge_filter.html">gauge_filter.pl</a></td>
</tr>

<tr>
<td>Generate report of which gauges were removed.</td>

<td>--gauges-removed</td>
</tr>

<tr>
<td><font color="#000000">Computing R/G.</font></td>

<td><a href="r_over_g.html">r_over_g.pl</a></td>
</tr>

<tr>
<td><font color="#000000">Adjusting FACE ZR w/ R/G.</font></td>

<td><i>internal</i></td>
</tr>

<tr>
<td><font color="#000000">Generating the ZR table.</font></td>

<td><a href="build_zr_table.html">build_zr_table.c</a></td>
</tr>
</table>

<p><font color="#000000">The program <b>automatic_zr.pl</b>&nbsp; attempts
to fully automate the process of generating the ZR tables based on quality
controlled merged radar and gauge datasets.&nbsp; The programs listed in
the table are executed starting with <a href="automatic_qc.html">automatic_qc.pl</a>
and finishing with <a href="build_zr_table.html">build_zr_table.c</a> (really
<a href="build_zr_table.html">build_zr_table</a>)
which results in a ZR table written to disk.&nbsp; The program reports,
via STDERR, what gauge QC filter file is produced as well as the actual
<a href="build_zr_table.html">build_zr_table</a>
command used.</font>
<p><font color="#000000">The merged radar and gauge file, usually called
the second intermediate file, is generated by the program <a href="merge_radarNgauge_data.html">merge_radarNgauge_data</a>.</font>
<p><font color="#000000">The input, which may be stdin, is the second intermediate
file.&nbsp; It need not be sorted in any way, as this program sorts it
using <a href="sort_zr_intermediate_ascii.html">sort_zr_intermediate_ascii</a>.&nbsp;
That sorting is done in the program <a href="automatic_qc.html">automatic_qc.pl</a>.</font>
<p><font color="#000000">The program <a href="r_over_g.html">r_over_g.pl</a>
constructs R/G, the ratio of the total rain from the radar (R) to the total
rain from the gauge (G). This value is the bulk adjustment that should
be applied to the FACE equation (300R<sup>1.4</sup>).&nbsp;&nbsp; The new
coefficient (A) is 300*(R/G)^1.4.</font>
<p>
<hr WIDTH="100%">
<h3>
<font color="#000099">Limitations</font></h3>

<ol>
<li>
<font color="#000000">It can only construce ZR tables for two rain types:
Convective and Stratiform.</font></li>

<li>
<font color="#000000">No range dependancy, other than already coded in
<a href="build_zr_table.html">build_zr_table.c</a>.&nbsp;
0-15km is MISSING, 15-100km valid data, beyond 100km is MISSING.</font></li>

<li>
<font color="#000000">The site, date and time are taken from the header
of the merged radar and gauge file, the 2-nd intermediate file.&nbsp; The
latitude and longitude are taken from the default file $GVS_DATA_PATH/gv_radar_site_info.data
keying off the site.</font></li>

<li>
<font color="#000000">Generates odd looking filenames, but, reports what
they are.&nbsp; Do we want this program to write to STDOUT?&nbsp; I thought
not; the filter.file can be traced to the ZR table produced -- they contain
the same id number in the filename.</font></li>
</ol>

<p><br>
<hr WIDTH="100%">
<h3>
<font color="#000080">Options</font></h3>
<b><tt><font color="#B22222">&nbsp; --no-qc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">&nbsp;&nbsp;
- Implies no filtering of gauges.&nbsp; Ie., the 2-nd</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
intermediate file is the final version.</font></tt></b>
<br><b><tt><font color="#B22222">&nbsp; --filter-file file&nbsp;&nbsp;</font><font color="#000000">&nbsp;
- No QC step is performed, but, gauge filtering</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
still happens.&nbsp; 'file' contains filtering</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
info. Ie., 'file' is the output of</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
make_gauge_filter_file.pl.</font></tt></b>
<br><b><tt><font color="#000000">&nbsp; </font><font color="#CC0000">--gauges-removed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">
- Report gauges removed during QC to</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
file 'gauges-removed.fileNNNNN', where NNNNN</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
is a 1 to 5 digit number.</font></tt></b>
<br><b><tt><font color="#B22222">&nbsp; --help&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">&nbsp;&nbsp;
- This usage message.</font></tt></b>
<p><b><tt><font color="#000000">&nbsp; Input: STDIN&nbsp;&nbsp; - The merged
radar and gauge file (2-nd intermediate file).</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;Output: zr_table.zrNNNN - The ZR
table, Gauge QC-d and adjusted.</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
STDERR&nbsp; - Filter file, Site, start/stop times, lat/lon and</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
the build_zr_table command.</font></tt></b>
<br>&nbsp;
<p>
<hr WIDTH="100%">
<h3>
<font color="#000080">Input</font></h3>
<b><font color="#B22222">second_intermediate_file.ascii</font></b><font color="#000000">,
this may be from stdin.</font>
<br><b><font color="#993300">filter.file</font><font color="#000000"> -
Optional.</font></b>
<br>
<hr WIDTH="100%">
<h3>
<font color="#000080">Temporary Files or Directories</font></h3>
<font color="#000000">None.</font>
<p>
<hr WIDTH="100%">
<h3>
<font color="#000080">Output</font></h3>
<font color="#000000">filter.file</font><font color="#FF0000">N</font>
<br><font color="#000000">zr_table.zr</font><font color="#FF0000">N</font>
<p><font color="#000000">where </font><font color="#FF0000">N</font><font color="#000000">
= a number from 0 through 32000 some odd.&nbsp; The numbers are the range
of process numbers on Unix.</font>
<br>
<hr WIDTH="100%">
<h3>
<font color="#000080">Return Value</font></h3>
<font color="#000000">None.</font>
<br>
<hr WIDTH="100%">
<h3>
<font color="#000080">Author</font></h3>
John H. Merritt, SM&amp;A Corp.<i>, NASA/GSFC/TRMM Office</i>
</body>
</html>
